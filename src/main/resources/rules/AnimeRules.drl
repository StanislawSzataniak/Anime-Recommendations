package com.sample
 
import com.sample.AnimeRecommendation.Question;
import com.sample.AnimeRecommendation.Answer;
import com.sample.AnimeRecommendation.UsedAnswer;
import com.sample.AnimeRecommendation.FinalAnswer;
import java.util.ArrayList;
 
rule "Start"
    when
        $q : Question( status == 1 )
        $a : Answer( answer.equals("Start"));
        not UsedAnswer( answer == $a )
    then
	    ArrayList<Answer> answers = new ArrayList<>();
		answers.add(new Answer("A good start"));
		answers.add(new Answer("A classic"));
		answers.add(new Answer("Series? What if I want a movie?"));
		answers.add(new Answer("Something ambitious"));
    	update($q) {
    		$q.setQuestion("What kind of series are you looking for?");
	        $q.setAnswers(answers);
    	}
    	insert (new UsedAnswer($a));
end

rule "A good start"
	when
		$q : Question( status == 1 )
        $a : Answer( answer.equals("A good start"));
        not UsedAnswer( answer == $a )
    then 
    	update($q) {
    		$q.setStatus(0);
    	}
    	ArrayList<String> answers = new ArrayList<>();
    	answers.add("Fullmetal Alchemist: Brotherhood");
    	insert (new FinalAnswer (answers));
    	insert (new UsedAnswer($a));
end   	
    	
    	
rule "A classic"
	when
		$q : Question( status == 1 )
        $a : Answer( answer.equals("A classic"));
        not UsedAnswer( answer == $a )
    then 
    	update($q) {
    		$q.setStatus(0);
    	}
    	ArrayList<String> answers = new ArrayList<>();
    	answers.add("Cowboy Bebop");
    	insert (new FinalAnswer (answers));
    	insert (new UsedAnswer($a));
end   	
    	

rule "Something ambitious"
	when
		$q : Question( status == 1 )
        $a : Answer( answer.equals("Something ambitious"));
        not UsedAnswer( answer == $a )
    then 
    	ArrayList<Answer> answers = new ArrayList<>();
		answers.add(new Answer("Thriller"));
		answers.add(new Answer("Drama"));
    	update($q) {
    		$q.setQuestion("Intensive or calm?");
	        $q.setAnswers(answers);
    	}
    	insert (new UsedAnswer($a));
end

rule "Thriller"
	when
		$q : Question( status == 1 )
        $a : Answer( answer.equals("Thriller"));
        not UsedAnswer( answer == $a )
    then 
    	ArrayList<Answer> answers = new ArrayList<>();
		answers.add(new Answer("Popular flicks"));
		answers.add(new Answer("Let's go heavy"));
		answers.add(new Answer("Solid science fiction"));
    	update($q) {
    		$q.setQuestion("Popular stuff or good stuff?");
	        $q.setAnswers(answers);
    	}
    	insert (new UsedAnswer($a));
end   	
    	
    	
    	
    	
    	
    	
    	
 